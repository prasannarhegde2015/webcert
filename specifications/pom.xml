<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (C) 2016 Inera AB (http://www.inera.se)
  ~
  ~ This file is part of sklintyg (https://github.com/sklintyg).
  ~
  ~ sklintyg is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ sklintyg is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>se.inera.intyg.webcert</groupId>
    <artifactId>webcert</artifactId>
    <version>5.0.0-b61</version>
  </parent>
  <artifactId>webcert-specifications</artifactId>
  <packaging>jar</packaging>
  <name>Webcert (FitNesse)</name>
  <properties>
    <geb.env>firefox</geb.env>
    <!-- URLs to services -->
    <webcert.web.baseUrl>http://localhost:9088/</webcert.web.baseUrl>
    <webcert.baseUrl>http://localhost:9088/</webcert.baseUrl>
    <logsender.baseUrl>http://localhost:9097/log-sender/</logsender.baseUrl>
    <certificate.baseUrl>http://localhost:8080/inera-certificate/</certificate.baseUrl>
    <fitnesse.port>9126</fitnesse.port>
    <fitnesse.working>${project.basedir}/src/test/fitnesse</fitnesse.working>
    <fitnesse.root>FitNesseRoot</fitnesse.root>
    <fitnesse.project.root>WebCert.AutomatiseradeTester</fitnesse.project.root>
    <fitnesse.suite>${fitnesse.project.root}</fitnesse.suite>
    <runtags></runtags>
    <!-- This example has no unit tests, just integration tests -->
    <skipTests>true</skipTests>
  </properties>
  <dependencies>
    <dependency>
      <groupId>se.inera.intyg.common</groupId>
      <artifactId>log-messages</artifactId>
    </dependency>
    <dependency>
      <groupId>se.inera.intyg.common</groupId>
      <artifactId>hsa-integration</artifactId>
    </dependency>
    <dependency>
      <groupId>${project.groupId}</groupId>
      <artifactId>mail-stub</artifactId>
    </dependency>
    <!-- Common -->
    <dependency>
      <groupId>se.inera.intyg.common</groupId>
      <artifactId>common-specifications</artifactId>
    </dependency>
    <!-- Schemas -->
    <dependency>
      <groupId>se.riv.clinicalprocess.healthcond.certificate</groupId>
      <artifactId>clinicalprocess-healthcond-certificate-schemas</artifactId>
    </dependency>
    <dependency>
      <groupId>se.riv.insuranceprocess.healthreporting</groupId>
      <artifactId>insuranceprocess-healthreporting-schemas</artifactId>
    </dependency>
    <dependency>
      <groupId>se.riv.itintegration.monitoring</groupId>
      <artifactId>itintegration-monitoring-schemas</artifactId>
    </dependency>
    <dependency>
      <groupId>se.inera.intyg.infrastructure.directory.privatepractitioner.terms</groupId>
      <artifactId>intyg-infrastructure-directory-privatepractitioner-terms-schemas</artifactId>
    </dependency>
    <!-- Misc -->
    <dependency>
      <groupId>javax.jms</groupId>
      <artifactId>jms-api</artifactId>
    </dependency>
    <dependency>
      <groupId>org.apache.activemq</groupId>
      <artifactId>activemq-client</artifactId>
    </dependency>
    <dependency>
      <groupId>org.codehaus.groovy</groupId>
      <artifactId>groovy-all</artifactId>
    </dependency>
    <dependency>
      <groupId>org.fitnesse</groupId>
      <artifactId>fitnesse</artifactId>
      <version>20150814</version>
    </dependency>
    <dependency>
      <groupId>org.gebish</groupId>
      <artifactId>geb-core</artifactId>
    </dependency>
    <dependency>
      <groupId>org.seleniumhq.selenium</groupId>
      <artifactId>selenium-server</artifactId>
    </dependency>
    <dependency>
      <groupId>org.seleniumhq.selenium</groupId>
      <artifactId>selenium-firefox-driver</artifactId>
      <version>2.47.1</version>
    </dependency>
    <dependency>
      <groupId>org.seleniumhq.selenium</groupId>
      <artifactId>selenium-support</artifactId>
    </dependency>
    <dependency>
      <groupId>org.seleniumhq.selenium</groupId>
      <artifactId>selenium-chrome-driver</artifactId>
    </dependency>
    <dependency>
      <groupId>org.seleniumhq.selenium</groupId>
      <artifactId>selenium-safari-driver</artifactId>
    </dependency>
    <dependency>
      <groupId>org.seleniumhq.selenium</groupId>
      <artifactId>selenium-remote-driver</artifactId>
    </dependency>
    <dependency>
      <groupId>org.seleniumhq.selenium</groupId>
      <artifactId>selenium-htmlunit-driver</artifactId>
    </dependency>
    <dependency>
      <groupId>com.h2database</groupId>
      <artifactId>h2</artifactId>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>com.jayway.awaitility</groupId>
      <artifactId>awaitility</artifactId>
      <version>1.4.0</version>
    </dependency>
  </dependencies>
  <build>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>exec-maven-plugin</artifactId>
          <version>${exec-maven-plugin.version}</version>
          <configuration>
            <classpathScope>test</classpathScope>
          </configuration>
        </plugin>
      </plugins>
    </pluginManagement>
    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <compilerId>groovy-eclipse-compiler</compilerId>
          <verbose>true</verbose>
        </configuration>
        <dependencies>
          <dependency>
            <groupId>org.codehaus.groovy</groupId>
            <artifactId>groovy-eclipse-compiler</artifactId>
            <version>${groovy-eclipse-compiler.version}</version>
          </dependency>
          <dependency>
            <groupId>org.codehaus.groovy</groupId>
            <artifactId>groovy-eclipse-batch</artifactId>
            <version>${groovy-eclipse-batch.version}</version>
          </dependency>
        </dependencies>
      </plugin>
      <plugin>
        <artifactId>maven-clean-plugin</artifactId>
        <configuration>
          <filesets>
            <fileset>
              <directory>${fitnesse.working}</directory>
              <includes>
                <include>${fitnesse.root}/ErrorLogs/**</include>
                <include>${fitnesse.root}/FitNesse/**</include>
                <include>${fitnesse.root}/PageHeader/**</include>
                <include>${fitnesse.root}/RecentChanges/**</include>
                <include>${fitnesse.root}/files/**</include>
              </includes>
              <excludes>
                <exclude>${fitnesse.root}/files/validering/**</exclude>
                <exclude>${fitnesse.root}/files/.gitignore</exclude>
                <exclude>${fitnesse.root}/files/*.properties</exclude>
              </excludes>
            </fileset>
          </filesets>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <profiles>
    <profile>
      <id>demo</id>
      <properties>
        <webcert.web.baseUrl>https://test.webcert.intygstjanster.se/</webcert.web.baseUrl>
        <webcert.baseUrl>https://test.webcert.intygstjanster.se/</webcert.baseUrl>
        <logsender.baseUrl>https://test.webcert.intygstjanster.se/log-sender/</logsender.baseUrl>
        <certificate.baseUrl>http://10.250.34.20:8080/inera-certificate/</certificate.baseUrl>
      </properties>
    </profile>
    <profile>
      <id>build-server</id>
      <properties>
        <webcert.web.baseUrl>https://webcert.inera.nordicmedtest.se/</webcert.web.baseUrl>
        <webcert.baseUrl>https://webcert.inera.nordicmedtest.se/</webcert.baseUrl>
        <logsender.baseUrl>https://webcert.inera.nordicmedtest.se/log-sender/</logsender.baseUrl>
        <certificate.baseUrl>https://intygstjanst.inera.nordicmedtest.se/inera-certificate/</certificate.baseUrl>
      </properties>
    </profile>
    <profile>
      <id>ip20</id>
      <properties>
        <webcert.web.baseUrl>https://webcert.ip20.nordicmedtest.sjunet.org/</webcert.web.baseUrl>
        <webcert.baseUrl>https://webcert.ip20.nordicmedtest.sjunet.org/</webcert.baseUrl>
        <logsender.baseUrl>https://webcert.ip20.nordicmedtest.sjunet.org/log-sender/</logsender.baseUrl>
        <certificate.baseUrl>https://intyg.ip20.nordicmedtest.sjunet.org/inera-certificate/</certificate.baseUrl>
      </properties>
    </profile>
    <profile>
      <id>ip30</id>
      <properties>
        <webcert.web.baseUrl>https://webcert.ip30.nordicmedtest.sjunet.org/</webcert.web.baseUrl>
        <webcert.baseUrl>https://webcert.ip30.nordicmedtest.sjunet.org/</webcert.baseUrl>
        <logsender.baseUrl>https://webcert.ip30.nordicmedtest.sjunet.org/log-sender/</logsender.baseUrl>
        <certificate.baseUrl>https://intyg.ip30.nordicmedtest.sjunet.org/inera-certificate/</certificate.baseUrl>
      </properties>
    </profile>
    <profile>
      <id>ip40</id>
      <properties>
        <webcert.web.baseUrl>https://webcert.ip40.nordicmedtest.sjunet.org/</webcert.web.baseUrl>
        <webcert.baseUrl>https://webcert.ip40.nordicmedtest.sjunet.org/</webcert.baseUrl>
        <logsender.baseUrl>https://webcert.ip40.nordicmedtest.sjunet.org/log-sender/</logsender.baseUrl>
        <certificate.baseUrl>https://intygstjanst.ip40.nordicmedtest.sjunet.org/inera-certificate/</certificate.baseUrl>
      </properties>
    </profile>
    <profile>
      <id>ssh-tunnel</id>
      <properties>
        <webcert.web.baseUrl>http://localhost:28080/</webcert.web.baseUrl>
        <webcert.baseUrl>http://localhost:28080/</webcert.baseUrl>
        <logsender.baseUrl>http://localhost:28080/log-sender/</logsender.baseUrl>
        <certificate.baseUrl>http://localhost:18080/inera-certificate/</certificate.baseUrl>
      </properties>
    </profile>
    <profile>
      <id>qa</id>
      <properties>
        <webcert.web.baseUrl>https://verifiering.webcert.intygstjanster.se/</webcert.web.baseUrl>
      </properties>
    </profile>
    <profile>
      <id>chrome</id>
      <properties>
        <geb.env>chrome</geb.env>
      </properties>
    </profile>
    <profile>
      <id>safari</id>
      <properties>
        <geb.env>safari</geb.env>
      </properties>
    </profile>
    <profile>
      <id>headless</id>
      <properties>
        <geb.env>headless</geb.env>
      </properties>
    </profile>
    <profile>
      <id>saucelabchrome</id>
      <properties>
        <geb.env>saucelabschrome</geb.env>
      </properties>
    </profile>
    <profile>
      <id>saucelabsfirefox</id>
      <properties>
        <geb.env>saucelabsfirefox</geb.env>
      </properties>
    </profile>
    <profile>
      <id>saucelabsie</id>
      <properties>
        <geb.env>saucelabsie</geb.env>
      </properties>
    </profile>
    <profile>
      <id>saucelabssafari</id>
      <properties>
        <geb.env>saucelabssafari</geb.env>
      </properties>
    </profile>
    <profile>
      <id>smoke</id>
      <properties>
        <runtags>smoke</runtags>
      </properties>
    </profile>
    <profile>
      <id>wiki</id>
      <build>
        <plugins>
          <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
              <execution>
                <id>start-fitnesse</id>
                <phase>verify</phase>
                <configuration>
                  <target unless="maven.test.skip">
                    <echo message="Starting FitNesse wiki..." taskname="fitnesse"/>
                    <java classname="fitnesseMain.FitNesseMain" classpathref="maven.runtime.classpath" fork="true">
                      <arg line="-p ${fitnesse.port}"/>
                      <arg line="-d ${fitnesse.working}"/>
                      <jvmarg value="-Dwebcert.web.baseUrl=${webcert.web.baseUrl}"/>
                      <jvmarg value="-Dwebcert.baseUrl=${webcert.baseUrl}"/>
                      <jvmarg value="-Dlogsender.baseUrl=${logsender.baseUrl}"/>
                      <jvmarg value="-Dcertificate.baseUrl=${certificate.baseUrl}"/>
                      <jvmarg value="-Dfitnesse.working=${fitnesse.working}"/>
                      <jvmarg value="-Dgeb.env=${geb.env}"/>
                    </java>
                  </target>
                </configuration>
                <goals>
                  <goal>run</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
      <dependencies>
        <dependency>
          <groupId>org.fitnesse.plugins</groupId>
          <artifactId>maven-classpath-plugin</artifactId>
          <version>1.9</version>
          <scope>runtime</scope>
        </dependency>
      </dependencies>
    </profile>
    <profile>
      <id>auto</id>
      <build>
        <plugins>
          <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
              <execution>
                <id>start-fitnesse-integration</id>
                <phase>verify</phase>
                <configuration>
                  <target unless="maven.test.skip">
                    <echo message="Starting FitNesse auto..." taskname="fitnesse"/>
                    <java classname="fitnesseMain.FitNesseMain" classpathref="maven.runtime.classpath" fork="true" failonerror="true">
                      <arg line="-p ${fitnesse.port}"/>
                      <arg line="-d ${fitnesse.working}"/>
                      <arg line="-b fitnesse-results.xml"/>
                      <arg value="-c"/>
                      <arg value="WebCert.AutomatiseradeTester?suite&amp;format=xml&amp;includehtml&amp;runTestsMatchingAllTags=${runtags}"/>
                      <jvmarg value="-Dwebcert.web.baseUrl=${webcert.web.baseUrl}"/>
                      <jvmarg value="-Dwebcert.baseUrl=${webcert.baseUrl}"/>
                      <jvmarg value="-Dlogsender.baseUrl=${logsender.baseUrl}"/>
                      <jvmarg value="-Dcertificate.baseUrl=${certificate.baseUrl}"/>
                      <jvmarg value="-Dfitnesse.working=${fitnesse.working}"/>
                      <jvmarg value="-Dgeb.env=${geb.env}"/>
                    </java>
                  </target>
                </configuration>
                <goals>
                  <goal>run</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
      <dependencies>
        <dependency>
          <groupId>org.fitnesse.plugins</groupId>
          <artifactId>maven-classpath-plugin</artifactId>
          <version>1.9</version>
          <scope>runtime</scope>
        </dependency>
      </dependencies>
    </profile>
  </profiles>
</project>
